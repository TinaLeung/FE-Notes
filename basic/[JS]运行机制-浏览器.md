关键点
• 进程与线程
• JS单线程、执行栈
• 浏览器的事件机制（Event Loop）
• 宏任务与微任务

# 进程与线程
进程是CPU资源分配的最小单位，进程包括运行中的程序和程序所使用到的内存和系统资源
线程是CPU调度的最小单位，是建立在进程的基础上的一次程序运行单位
单线程：一个进程只有一个线程，所有程序按照顺序执行
多线程：一个进程中有多个线程，可以同时运行多个不同的线程来执行不同的任务

# JS & 单线程
因为JS主要用途之一是操作DOM，如果是多线程，同时操作DOM会带来复杂的同步问题。
H5的Web Worker允许JS创建多个线程，但是子线程中不能操作DOM，而且完全受主线程控制

# 浏览器
浏览器是多进程的
每个Tab页就是一个单独的进程
每个Tab页都有一个渲染进程，互不影响
每个渲染进程又是多线程的，包含GUI渲染线程、JS引擎线程、事件触发线程、定时触发器线程、异步HTTP请求线程等。

# JS执行栈
JS中有同步代码和异步代码
JS引擎线程在执行JS同步代码时，会形成一个执行栈

# 宏任务 & 微任务
宏任务包括：主代码块、setTimeout、setInterval、setImmediate、requestAnimationFrame
微任务：process.nextTick、Promise.then()
【注】http请求既不是宏任务也不是微任务，当请求返回时就会立即执行

# Event Loop
JS引擎线程（主线程）首先执行主代码块（即执行栈开始顺序执行），遇到同步任务直接执行，遇到异步任务，判断是宏任务还是微任务，如果是宏任务，则触发异步线程，异步线程执行完后会通知事件触发线程，事件触发线程将回调放入宏任务队列；如果是微任务，就会把回调放在微任务队列（微任务队列是在浏览器在执行到script脚本的时候，JS引擎会为全局创建一个执行上下文，在该执行上下文中维护了一个微任务队列），继续执行同步代码。
同步代码执行完，查看微任务队列是否有要执行的，有的话全部执行清空队列
进行GUI渲染
询问宏任务队列是否有要执行的，有的话取出一个宏任务，重复上述步骤执行；没有的话不停发起询问